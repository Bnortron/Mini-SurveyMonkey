<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Show Survey</title>
    <link th:href="@{/css/showsurveyStyle.css}" rel="stylesheet" />
</head>
<body>
<h1>Survey: <span th:text="${survey.title}"></span> </h1>
<!-- Form for the Activate Button (if Survey is currently inactive) -->
<form action="#" th:action="@{'/survey/' + ${survey.id} + '/activate'}" method="post">
    <button th:if="${!survey.active}" type="submit" name="Activate" class="activate">Activate</button>
</form>
<!-- Form for the Deactivate button (if Survey is currently active) -->
<form action="#" th:action="@{'/survey/' + ${survey.id} + '/deactivate'}" method="post">
    <button th:if="${survey.active}" type="submit" name="Deactivate" class="deactivate">Deactivate</button>
</form>
<div>
    <p>ID: <span th:text="${survey.id}"></span></p>
    <p>Title: <span th:text="${survey.title}"></span></p>
    <p>Description: <span th:text="${survey.description}"></span></p>
    <p>Status: <span th:text="${survey.active} ? 'Active' : 'Inactive'"></span></p>
    <p>Questions: <span th:text="${survey.getQuestions().size()}"></span></p>
    <form action="/response" method="POST">
        <div th:each="question: ${survey.getQuestions()}" class="question">
            <th:block th:switch="${question.getQuestionType()}">
                <div th:case="${T(com.example.QuestionType).MULTIPLE_CHOICE}">
                    <div th:replace="multiplechoicequestion.html :: mcq"></div>
                </div>
                <div th:case="${T(com.example.QuestionType).TEXT}">
                    <div th:replace="textquestion.html :: text"></div>
                </div>
                <div th:case="${T(com.example.QuestionType).NUMBER_CHOICE_LINE}">
                    <div th:replace="numberquestion.html :: num"></div>
                </div>
            </th:block>
        </div>
        <input th:if="${survey.active}" type="submit">
    </form>
    <p> View Another Survey <a href="/selectsurvey">here</a></p>
    <p> Return Home <a href="/">here</a></p>
</div>
</body>
</html>
